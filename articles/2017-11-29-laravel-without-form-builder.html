<!DOCTYPE html>
<html lang="th-TH">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Form Builder ไม่ใช่สิ่งจำเป็นสำหรับ Laravel Framework | tutor4dev</title>
    <meta name="description" content="Form Builder ได้ถูกถอดออกจาก Core ของ Laravel Framework ตั้งแต่เวอร์ชั่น 5 เป็นต้นมา หากนักพัฒนาต้องการใช้การ Form Builder จะต้องติดตั้ง Package &#96;laravelcollective/html&#96; เพิ่มเติมเอง บทความนี้จึงขอเสนอทางเลือกในการโค้ด Laravel Framework แบบไม่ใช้งาน Form Builder โดยการเปลี่ยนมาใช้ &#96;&lt;form&gt;&#96; แทนครับ">
    <meta property="og:locale" content="th_TH">
  <meta property="og:type" content="article">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kanit|Source+Code+Pro">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta name="keywords" content="laravel, form"><meta property="og:description" content="Form Builder ได้ถูกถอดออกจาก Core ของ Laravel Framework ตั้งแต่เวอร์ชั่น 5 เป็นต้นมา หากนักพัฒนาต้องการใช้การ Form Builder จะต้องติดตั้ง Package `laravelcollective/html` เพิ่มเติมเอง บทความนี้จึงขอเสนอทางเลือกในการโค้ด Laravel Framework แบบไม่ใช้งาน Form Builder โดยการเปลี่ยนมาใช้ `&lt;form&gt;` แทนครับ"><meta property="og:title" content="Form Builder ไม่ใช่สิ่งจำเป็นสำหรับ Laravel Framework"><meta property="og:url" content="https://tutor4dev.com/articles/2017-11-29-laravel-without-form-builder.html"><meta property="og:image" content="https://tutor4dev.com/images/thumbnails/laravel.png">
    <link rel="preload" href="/assets/css/0.styles.85503cd0.css" as="style"><link rel="preload" href="/assets/js/app.2fb89d67.js" as="script"><link rel="preload" href="/assets/js/23.8fc29c26.js" as="script"><link rel="prefetch" href="/assets/js/10.19a93195.js"><link rel="prefetch" href="/assets/js/11.4839b2c5.js"><link rel="prefetch" href="/assets/js/12.43d3d9bc.js"><link rel="prefetch" href="/assets/js/13.c6b0273a.js"><link rel="prefetch" href="/assets/js/14.99e5612b.js"><link rel="prefetch" href="/assets/js/15.4a80a520.js"><link rel="prefetch" href="/assets/js/16.9d03883d.js"><link rel="prefetch" href="/assets/js/17.85020c52.js"><link rel="prefetch" href="/assets/js/18.91398a1f.js"><link rel="prefetch" href="/assets/js/19.f9a96888.js"><link rel="prefetch" href="/assets/js/2.094bf6d7.js"><link rel="prefetch" href="/assets/js/20.a9690ebf.js"><link rel="prefetch" href="/assets/js/21.a00a77fa.js"><link rel="prefetch" href="/assets/js/22.562990d5.js"><link rel="prefetch" href="/assets/js/24.de3da9f4.js"><link rel="prefetch" href="/assets/js/25.0472472d.js"><link rel="prefetch" href="/assets/js/26.8f474f06.js"><link rel="prefetch" href="/assets/js/27.f917ef5f.js"><link rel="prefetch" href="/assets/js/28.8896a162.js"><link rel="prefetch" href="/assets/js/29.ca7dd98c.js"><link rel="prefetch" href="/assets/js/3.8d44adec.js"><link rel="prefetch" href="/assets/js/30.5f27648e.js"><link rel="prefetch" href="/assets/js/31.24ff45da.js"><link rel="prefetch" href="/assets/js/32.80e3e2e0.js"><link rel="prefetch" href="/assets/js/33.a371342e.js"><link rel="prefetch" href="/assets/js/34.e8fe1dfa.js"><link rel="prefetch" href="/assets/js/35.306b0931.js"><link rel="prefetch" href="/assets/js/36.9ffa675d.js"><link rel="prefetch" href="/assets/js/37.8d1a2077.js"><link rel="prefetch" href="/assets/js/38.8e1ac153.js"><link rel="prefetch" href="/assets/js/39.296618eb.js"><link rel="prefetch" href="/assets/js/4.e59ffa50.js"><link rel="prefetch" href="/assets/js/40.1f4572a5.js"><link rel="prefetch" href="/assets/js/41.2587529b.js"><link rel="prefetch" href="/assets/js/42.db9edad2.js"><link rel="prefetch" href="/assets/js/43.8d9f2fed.js"><link rel="prefetch" href="/assets/js/44.ce1b378e.js"><link rel="prefetch" href="/assets/js/45.95e15a8d.js"><link rel="prefetch" href="/assets/js/5.cf11d61b.js"><link rel="prefetch" href="/assets/js/6.0d36f759.js"><link rel="prefetch" href="/assets/js/7.46d53fd4.js"><link rel="prefetch" href="/assets/js/8.4f2d32ba.js"><link rel="prefetch" href="/assets/js/9.2615014a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.85503cd0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><!----> <nav role="navigation" aria-label="main navigation" class="navbar" data-v-0b4010bb><div class="navbar-brand" style="margin-left:2em;" data-v-0b4010bb><a href="https://twitter.com/tutor4dev" target="_blank" class="navbar-item is-hidden-desktop" data-v-0b4010bb><span class="icon" style="color:#55acee;" data-v-0b4010bb><i class="fa fa-lg fa-twitter" data-v-0b4010bb></i></span></a><a href="https://fb.com/tutor4dev" target="_blank" class="navbar-item is-hidden-desktop" data-v-0b4010bb><span class="icon" style="color:#4267b2;" data-v-0b4010bb><i class="fa fa-lg fa-facebook" data-v-0b4010bb></i></span></a><a href="https://www.youtube.com/user/tutor4dev/videos" target="_blank" class="navbar-item is-hidden-desktop" data-v-0b4010bb><span class="icon" style="color:#ff0000;" data-v-0b4010bb><i class="fa fa-lg fa-youtube" data-v-0b4010bb></i></span></a> <button data-target="navMenu" class="button navbar-burger false" data-v-0b4010bb><span data-v-0b4010bb></span> <span data-v-0b4010bb></span> <span data-v-0b4010bb></span></button></div> <div id="navMenu" class="navbar-menu false" data-v-0b4010bb><a href="/" class="router-link-active navbar-item is-tab" data-v-0b4010bb>หน้าหลัก</a> <!----> <!----><!----> <a href="https://www.youtube.com/user/tutor4dev/videos" target="_blank" class="navbar-item is-tab" data-v-0b4010bb>YouTube</a> <!----><a href="/articles.html" class="navbar-item is-tab is-active" data-v-0b4010bb>บทความ</a> <!----> <!----><!----> <div class="navbar-item has-dropdown is-hoverable" data-v-0b4010bb><a class="navbar-link">หลักสูตรสำหรับองค์กร</a> <div class="navbar-dropdown"><a href="/courses/laravel.html" class="navbar-item is-tab">Laravel Framework 5 Fundamental</a><a href="/courses/node.html" class="navbar-item is-tab">Node.js และ Express.js Fundamental</a><a href="/courses/react.html" class="navbar-item is-tab">React.js และ Redux Fundamental</a><a href="/courses/vue.html" class="navbar-item is-tab">Vue.js และ Vuex Fundamental</a></div></div><!----> <div class="navbar-item has-dropdown is-hoverable" data-v-0b4010bb><a class="navbar-link">คอร์สอบรม</a> <div class="navbar-dropdown"><a href="/classes/gatsby.html" class="navbar-item is-tab">React.js และ Gatsby.js 101</a><a href="/classes/react.html" class="navbar-item is-tab">React.js และ Redux 101</a><a href="/classes/vue.html" class="navbar-item is-tab">Vue.js และ Vuex 101</a></div></div><!----> <div class="navbar-item has-dropdown is-hoverable" data-v-0b4010bb><a class="navbar-link">หมวดหมู่</a> <div class="navbar-dropdown"><a href="/articles?category=configuration" class="navbar-item is-tab">Configuration</a><a href="/articles?category=firebase" class="navbar-item is-tab">Firebase</a><a href="/articles?category=javascript" class="navbar-item is-tab">JavaScript</a><a href="/articles?category=laravel" class="navbar-item is-tab">Laravel</a><a href="/articles?category=line" class="navbar-item is-tab">LINE</a><a href="/articles?category=nodejs" class="navbar-item is-tab">Node.js</a><a href="/articles?category=php" class="navbar-item is-tab">PHP</a><a href="/articles?category=python" class="navbar-item is-tab">Python</a><a href="/articles?category=reactjs" class="navbar-item is-tab">React.js</a><a href="/articles?category=vscode" class="navbar-item is-tab">Visual Studio Code</a><a href="/articles?category=vuejs" class="navbar-item is-tab">Vue.js</a><a href="/articles?category=youtube" class="navbar-item is-tab">YouTube</a></div></div><a href="/about.html" class="navbar-item is-tab" data-v-0b4010bb>เกี่ยวกับเรา</a> <!----> <!----></div></nav> <section class="section" style="padding-top:0.5em;"><div class="container"><div class="columns"><div class="column is-three-quarters"><div class="is-article"><p style="margin-bottom:2em;"></p> <div class="content custom"><h1>Form Builder ไม่ใช่สิ่งจำเป็นสำหรับ Laravel Framework</h1> <p>Form Builder ได้ถูกถอดออกจาก Core ของ Laravel Framework ตั้งแต่เวอร์ชั่น 5 เป็นต้นมา หากนักพัฒนาต้องการใช้การ Form Builder จะต้องติดตั้ง Package <code>laravelcollective/html</code> เพิ่มเติมเอง บทความนี้จึงขอเสนอทางเลือกในการโค้ด Laravel Framework แบบไม่ใช้งาน Form Builder โดยการเปลี่ยนมาใช้ <code>&lt;form&gt;</code> แทนครับ</p> <h3 id="ตัวอย่างโค้ดของ-laravel-form-builder">ตัวอย่างโค้ดของ Laravel Form Builder</h3> <p>ก่อนอื่นเรามาดูตัวอย่างโค้ดของการใช้งาน Form Builder กันก่อนครับ</p> <p><em>Blade</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
{!! Form::open([ <span class="hljs-string">'url'</span> =&gt; <span class="hljs-string">'/registers'</span>, <span class="hljs-string">'method'</span> =&gt; <span class="hljs-string">'post'</span> ]) !!}

    {!! Form::input(<span class="hljs-string">'text'</span>, <span class="hljs-string">'first_name'</span>, <span class="hljs-keyword">null</span>, [ <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'input'</span> ]) !!}
    {!! Form::input(<span class="hljs-string">'text'</span>, <span class="hljs-string">'last_name'</span>, <span class="hljs-keyword">null</span>, [ <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'input'</span> ]) !!}

    {!! Form::submit(<span class="hljs-string">'Save'</span>, [ <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'button is-primary'</span> ]) !!}
    {!! Form::reset(<span class="hljs-string">'Cancel'</span>, [ <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'button is-danger'</span> ]) !!}

{!! Form::close() !!}
</code></pre></div><h3 id="ข้อดีของ-laravel-form-builder">ข้อดีของ Laravel Form Builder</h3> <ul><li>คำสั่ง เขียน Form มีกลิ่นอายในแบบ Laravel Syntax</li> <li>คำสั่ง <code>Form::open()</code> ใส่ <code>csrf</code> Token ให้โดยอัตโนมัติ</li> <li>คำสั่ง <code>Form::select()</code> ไม่จำเป็นต้องเขียน Loop เอง</li> <li>คำสั่ง Form Element ต่างๆ Restore ค่าเดิมให้อัตโนมัติกรณีที่ไม่ผ่านการ Validation</li> <li>คำสั่ง <code>Form::model()</code> ช่วยเพิ่มความสะดวกในการใช้ Form ร่วมกับ <code>Eloquent</code></li></ul> <h3 id="ข้อเสียของ-laravel-form-builder">ข้อเสียของ Laravel Form Builder</h3> <ul><li>ถูกถอดออกจาก Core ของ Laravel Framework ตั้งแต่ Version 5 ถ้าจะใช้ต้องติดตั้งเพิ่มเติม</li> <li>Form Builder ถูก Maintain โดย 3rd Party ไม่ใช่ Community ของ Laravel</li> <li>ต้องเรียนรู้ Syntax เพิ่มเติม</li> <li>ไม่รองรับ Emmet</li> <li>กรณี Web Application มี UI ของ HTML ที่ซับซ้อน ต้องใช้ Syntax ของ Form Builder ผสมกับ HTML Element ทำให้ดูไม่สวยงาม</li> <li>ไม่สามารถขอความช่วยเหลือจากนักพัฒนาที่ไม่ได้ใช้ Form Builder</li></ul> <h3 id="html-form">HTML Form</h3> <p>ก่อนที่จะเขียน <code>&lt;form&gt;</code> ร่วมกับ Laravel Framework เรามาลองเขียน <code>&lt;form&gt;</code> แบบพื้นฐานกันดูก่อน</p> <h3 id="เตรียมไฟล์สำหรับเขียนโปรแกรม">เตรียมไฟล์สำหรับเขียนโปรแกรม</h3> <p><em>Path</em></p> <div class="language- extra-class"><pre class="hljs"><code>
|-register.html
|-submit.html
|-submit.php...
</code></pre></div><p>เพิ่ม Attribute <code>action</code> เพื่อกำหนดว่า Form จะถูก Submit ไปที่ไฟล์ไหน ซึ่งสามารถกำหนดเป็นไฟล์ HTML ก็ยังได้</p> <p>ไฟล์ <em>register.html</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/submit.html&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;first_name&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;last_name&quot;</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Save&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><p>Start PHP Built-in Web Server ที่ Root Path ของโปรเจค</p> <p>พิมพ์คำสั่งที่ <em>Terminal</em></p> <div class="language- extra-class"><pre class="hljs"><code>
php -S localhost:8000
</code></pre></div><p><em>Browser</em></p> <div class="language- extra-class"><pre class="hljs"><code>
http://localhost:8000/register.html
</code></pre></div><p></p><figure class="image"><img src="/images/blogs/1711-010.png" alt="html form"></figure><p></p> <h3 id="การ-submit-form">การ Submit Form</h3> <p></p><figure class="image"><img src="/images/blogs/1711-011.png" alt="html form submit using get method"></figure><p></p> <p>ไฟล์ <em>register.html</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ได้รับข้อมูลเรียบร้อยแล้ว<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
</code></pre></div><p></p><figure class="image"><img src="/images/blogs/1711-012.png" alt="html form submit response"></figure><p></p> <blockquote><p>การ Submit Form ด้วย Default Method (<code>GET</code>) จะส่งผลให้เกิดเป็น Query String ตามรูปตัวอย่าง ในการทำงานจริงเราจะไม่เลือกใช้ <code>GET</code> Method สำหรับการ Submit Form เนื่องจากไม่มีความปลอดภัย</p></blockquote> <h3 id="การ-submit-form-ด้วย-post-method">การ Submit Form ด้วย <code>POST</code> Method</h3> <p>ไฟล์ <em>register.html</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/submit.html&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><p></p><figure class="image"><img src="/images/blogs/1711-013.png" alt="html form submit using post method"></figure><p></p> <blockquote><p>การ Submit Form ด้วย <code>POST</code> Method ข้อมูลจะถูก Encode (เปลี่ยนแปลงรูปร่างหน้าตาเพื่อความสะดวกในการ Transportation) และ ถูกแนบไปกับ Request เราสามารถตรวจสอบ Request และ Response โดยใช้ Chrome <code>DevTools</code></p></blockquote> <h3 id="html-form-php-script">HTML Form &amp; PHP Script</h3> <p>การ Submit Form ไปยังไฟล์ HTML นั้นสามารถทำได้ แต่ก็นำมาใช้ประโยชน์อะไรไม่ได้ เราจะลองเปลี่ยนเป็นการ Submit Form ไปยังไฟล์ PHP แทนครับ</p> <p>ไฟล์ <em>register.html</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/submit.php&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><p>ไฟล์ <em>submit.php</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
<span class="hljs-meta">&lt;?php</span>

var_dump($_POST);
</code></pre></div><p><em>Result</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
<span class="hljs-keyword">array</span> (size=<span class="hljs-number">2</span>)
  <span class="hljs-string">'first_name'</span> =&gt; string <span class="hljs-string">'John'</span> (length=<span class="hljs-number">4</span>)
  <span class="hljs-string">'last_name'</span> =&gt; string <span class="hljs-string">'Doh'</span> (length=<span class="hljs-number">3</span>)
</code></pre></div><h3 id="เตรียมไฟล์สำหรับ-laravel-project">เตรียมไฟล์สำหรับ Laravel Project</h3> <p>เรามาลอง Setup Laravel Project แบบง่ายๆ โดยมีไฟล์ที่จะนำมาใช้ตามบทความ ตามโครงสร้างด้านล่าง</p> <p><em>Path</em></p> <div class="language- extra-class"><pre class="hljs"><code>
+-app
|   +-Http
|   |   +-Controllers
|   |   |   +-RegisterController
+-resources
|   +-views
|   |   +-registers
|   |   |   |-create.blade.php
|   |   |   |-edit.blade.php
|   +-routes
|   |   |-web.php
</code></pre></div><h3 id="route-controller-setup">Route &amp; Controller Setup</h3> <p>พิมพ์คำสั่งที่ <em>Terminal</em></p> <p>สร้าง Controller และ Route ในแบบ ReSTful</p> <div class="language- extra-class"><pre class="hljs"><code>
php artisan make:controller RegisterController --resource
</code></pre></div><p>ไฟล์ <em>routes/web.php</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
Route::resource(<span class="hljs-string">'registers'</span>, <span class="hljs-string">'RegisterController'</span>);
</code></pre></div><p>ไฟล์ <em>app/Http/RegisterController.php</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello World'</span>;
    }
}
</code></pre></div><p>พิมพ์คำสั่งที่ <em>Terminal</em></p> <div class="language- extra-class"><pre class="hljs"><code>
php artisan serv
</code></pre></div><p><em>Browser</em></p> <div class="language- extra-class"><pre class="hljs"><code>
http://localhost:8000
</code></pre></div><h3 id="ใช้งาน-form-ใน-laravel-framework">ใช้งาน Form ใน Laravel Framework</h3> <p>จากโค้ดตัวอย่างในหัวข้อ HTML Form เราจะเห็นว่าสาระสำคัญในเรื่องการ Submit Form ก็คือ Attribute <code>action</code> ของ <code>&lt;form&gt;</code> ซึ่งเป็นตัวกำหนดว่า Form จะถูก Submit ไปที่ไฟล์ไหนเพื่อประมวลผล ดังนั้นเมื่อนำมาใช้กับ Laravel Framework เราก็เพียงแค่ระบุ URI ตามที่ต้องการ</p> <p>ไฟล์ <em>resources/views/registers/create.blade.php</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/registers&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;first_name&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;last_name&quot;</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Save&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><p>ไฟล์ <em>App/Http/Controllers/RegisterController.php</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'registers.create'</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span><span class="hljs-params">(Request $request)</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;h3&gt;Thanks&lt;/h3&gt;'</span>;
    }
}
</code></pre></div><p></p><figure class="image"><img src="/images/blogs/1711-010.png" alt></figure><p></p> <p></p><figure class="image"><img src="/images/blogs/1711-014.png" alt></figure><p></p> <blockquote><p>Oops !!! เกิดปัญหาหลังจากทดลอง Submit Form</p></blockquote> <h3 id="csrf-protection">CSRF Protection</h3> <p>Laravel Framework มีระบบป้องการการถูกโจมตีในแบบ <code>csrf</code> เราจึงต้องส่งค่า <code>csrf</code> Token แนบไปกับการ Submit Form เพื่อให้ Request สามารถผ่านด่านอรหันต์นี้เข้าไปได้ แต่โชคดีที่ Laravel Framework มี Helper Function ไว้ให้เราเรียกใช้ โดยเราจะแก้ไขโค้ดตามตัวอย่างด้านล่าง</p> <p>ไฟล์ <em>creates/views/registers/create.blade.php</em></p> <div><div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/registers&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    {{ csrf_field() }}
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div></div> <p>Refresh หน้าเว็บและลองแสดง Page Source</p> <p><em>Page Source</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/registers&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_token&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UeNq68NZdMAszrhDdS2QJ9zqX...&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><blockquote><p><code>csrf_field()</code> ได้สร้าง <code>&lt;input type=&quot;henden&quot;&gt;</code></p></blockquote> <p>แก้ไขโค้ดเพิ่มเติมตามตัวอย่างด้านล่าง เพื่อ Retrieve ค่าจาก Form</p> <p>ไฟล์ <em>App/Http/Controllers/RegisterController.php</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span><span class="hljs-params">(Request $request)</span>
    </span>{
        $inputs = request()-&gt;all();
        <span class="hljs-comment">// $inputs = request()-&gt;except(_token);</span>

        dd($inputs);
    }
}
</code></pre></div><p>Refresh เว็บ, ป้อนข้อมูลใหม่ และลอง Submit Form</p> <p><em>Result</em></p> <div class="language-php extra-class"><pre class="hljs"><code>
<span class="hljs-keyword">array</span>:<span class="hljs-number">3</span> [▼
  <span class="hljs-string">&quot;_token&quot;</span> =&gt; <span class="hljs-string">&quot;UeNq68NZdMAszrhDdS2QJ9zq...&quot;</span>
  <span class="hljs-string">&quot;first_name&quot;</span> =&gt; <span class="hljs-string">&quot;John&quot;</span>
  <span class="hljs-string">&quot;last_name&quot;</span> =&gt; <span class="hljs-string">&quot;Doh&quot;</span>
]
</code></pre></div><h3 id="action-helper-function"><code>action()</code> Helper Function</h3> <p>หากเราไม่คุ้นเคยกับการเรียกใช้ URL Path ตรงๆ เราสามารถใช้ Helper Function <code>action()</code> เพื่อระบุการเข้าถึง Method ใน Controller ซึ่งง่ายกว่าในการทำความเข้าใจว่า Form จะถูก Submit ไปที่ใดกันแน่</p> <p>ไฟล์ <em>resources/views/registers/create.blade.php</em></p> <div><div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;{{ action('RegisterController@store') }}&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div></div> <h3 id="restful-method">ReSTful Method</h3> <p>การใช้ <code>&lt;form&gt;</code> เพื่อสร้าง ReSTful Request บางคนมักจะเข้าใจผิดว่าเราสามารถทำได้โดยการแก้ไขค่า Attribute <code>method</code> เหมือนในตัวอย่างด้านล่าง</p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;...&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;PUT&quot;</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><p>แต่ในความเป็นจริง <code>PUT</code> และ <code>DELETE</code> Method ไม่มีตัวตนอยู่จริงใน HTML Form แต่มีตัวตนใน <code>XMLHttpRequest</code> (AJAX) ดังนั้นการจะประยุกต์ใช้งาน HTTP Method เช่น <code>PUT</code> และ <code>DELETE</code> จึงเป็นได้แค่ส่วนขยายของ <code>POST</code> Method เท่านั้น ซึ่่งเป็นเรื่องของแต่ละ Framework ที่จะกำหนดวิธีการขึ้นมาเอง ซึ่งการกำหนด <code>PUT</code> และ <code>DELETE</code> Method ใน Laravel Framework จะใช้ Helper Function ชื่อ <code>method_field()</code> เป็นตัวกำหนด ตามตัวอย่างโค้ดด้านล่าง</p> <h3 id="put-method"><code>PUT</code> Method</h3> <p>ไฟล์ <em>creates/views/registers/edit.blade.php</em></p> <div><div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;{{ action('RegisterController@update', [ 'id' =&gt; 1001 ]) }}&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    {{ csrf_field() }}

    {{ method_field('PUT') }}

    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div></div> <blockquote><p><code>RegisterController@update</code> นั้นจะต้องแนบ Argument ซึ่งเป็น ID ของ Record ที่จะถูกแก้ไขไปด้วย เราจึงจำเป็นจะต้องมี Argument เพิ่มเติมให้กับ <code>action()</code> ด้วย</p></blockquote> <p><em>Page Source</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:8000/registers/1001&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_token&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UeNq68NZdMAszrhDdS2QJ9zqXQ1G02nav4e3sW6P&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;PUT&quot;</span>&gt;</span>

    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><blockquote><p><code>method_feld()</code> ได้สร้าง <code>&lt;input type=&quot;henden&quot;&gt;</code></p></blockquote> <h3 id="delete-method"><code>DELETE</code> Method</h3> <p>ไฟล์ <em>creates/views/registers/edit.blade.php</em></p> <div><div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;{{ action('RegisterController@destroy', [ 'id' =&gt; 1001 ]) }}&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    {{ csrf_field() }}

    {{ method_field('DELETE') }}

    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div></div> <p><em>Page Source</em></p> <div class="language-html extra-class"><pre class="hljs"><code>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:8000/registers/1001&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_token&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UeNq68NZdMAszrhDdS2QJ9zqXQ1G02nav4e3sW6P&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;DELETE&quot;</span>&gt;</span>

    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre></div><h3 id="つづく">つづく</h3></div></div></div> <div class="column is-hidden-mobile"><p style="margin-bottom:2em"></p> <!----></div></div></div></section> <!----></div></div>
    <script src="/assets/js/app.2fb89d67.js" defer></script><script src="/assets/js/23.8fc29c26.js" defer></script>
  </body>
</html>
