(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{208:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",[s._v("เขียนโปรแกรม CRUD ใช้งาน Cloud Firestore โดยใช้ React Hooks")]),s._v(" "),a("p",[s._v("Cloud Firestore คือบริการฐานข้อมูลประเภท NoSQL ที่จัดเก็บข้อมูลแบบ Online ซึ่งสามารถใช้งานได้ฟรีหากอยู่ในข้อจำกัดที่กำหนดไว้ บทความนี้เราจะลองมาเขียนโปรแกรม CRUD ด้วย React Hooks เพื่อใช้งานบริการฐานข้อมูลฟรีตัวนี้กันดูครับ")]),s._v(" "),a("p",[s._v("โดยบทความนี้จะไม่ขอพูดถึงพื้นฐานเกี่ยวกับ Cloud Firestore และฐานข้อมูลประเภท NoSQL นะครับ")]),s._v(" "),a("h3",{attrs:{id:"ข้อจำกัดของการใช้งาน-firestore-แบบฟรี"}},[s._v("ข้อจำกัดของการใช้งาน Firestore แบบฟรี")]),s._v(" "),a("p"),s._m(0),a("p"),s._v(" "),a("h3",{attrs:{id:"firebase-account"}},[s._v("Firebase Account")]),s._v(" "),a("p",[s._v("เราสามารถใช้ Google Account เพื่อสมัคร Firebase Account และสร้าง Firebase Project ได้ที่ "),a("a",{attrs:{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://console.firebase.google.com"),a("OutboundLink")],1)]),s._v(" "),s._m(1),s._v(" "),a("p"),s._m(2),a("p"),s._v(" "),a("h3",{attrs:{id:"เตรียมไฟล์สำหรับเขียนโปรแกรม"}},[s._v("เตรียมไฟล์สำหรับเขียนโปรแกรม")]),s._v(" "),s._m(3),s._v(" "),s._m(4),s._m(5),s._v(" "),s._m(6),a("h3",{attrs:{id:"module-สำหรับ-firebase-application"}},[s._v("Module สำหรับ Firebase Application")]),s._v(" "),a("p",[s._v("เพื่อความสะดวกในการเรียกใช้ Instance ของ Firebase Application จากไฟล์ Component แต่ละไฟล์ เราจึงแยกเขียน โค้ดในส่วนนี้ออกเป็น Module ซะเลย")]),s._v(" "),s._m(7),s._v(" "),s._m(8),a("h3",{attrs:{id:"ใช้งาน-firebase-module"}},[s._v("ใช้งาน Firebase Module")]),s._v(" "),s._m(9),s._v(" "),a("p",[s._v("ในฐานข้อมูลแบบ NoSQL นั้นเราสามารถอ้างถึงชื่อ Collection ทั้งๆที่เราไม่เคยสร้าง Schema ของ Collection นี้มาก่อน")]),s._v(" "),s._m(10),s._v(" "),s._m(11),a("h3",{attrs:{id:"insert-component"}},[s._v("Insert Component")]),s._v(" "),a("p",[s._v("มาเริ่มต้นที่ Component ตัวแรกซึ่งทำหน้าที่ Insert ข้อมูล กันเลยครับ")]),s._v(" "),s._m(12),s._v(" "),s._m(13),s._m(14),s._v(" "),s._m(15),s._v(" "),a("p",[s._v("หลังจากการ Insert แล้ว Cloud Firestore จะคืน Reference Object ของ Document ที่เพิ่งจะถูก Insert สำเร็จ ซึ่งเราสามารถใช้ Object นี้เข้าถึงค่าที่เราต้องการได้ เช่น Document ID เป็นต้น")]),s._v(" "),s._m(16),s._v(" "),s._m(17),a("p"),s._m(18),a("p"),s._v(" "),s._m(19),s._v(" "),a("h3",{attrs:{id:"realtime-subscription"}},[s._v("Realtime Subscription")]),s._v(" "),s._m(20),s._v(" "),s._m(21),s._v(" "),s._m(22),s._m(23),s._v(" "),s._m(24),s._m(25),s._v(" "),s._m(26),s._v(" "),s._m(27),s._v(" "),s._m(28),s._m(29),s._v(" "),s._m(30),s._v(" "),s._m(31),s._v(" "),a("p",[s._v("ขั้นตอนที่ 2 จะเป็นการใช้ค่าปัจจุบันของตัวแปร State บันทึกไปยัง Cloud Firestore")]),s._v(" "),s._m(32),s._v(" "),s._m(33),s._m(34),s._v(" "),a("h3",{attrs:{id:"つづく"}},[s._v("つづく")])])},[function(){var s=this.$createElement,t=this._self._c||s;return t("figure",{staticClass:"image"},[t("img",{attrs:{src:"https://i.imgur.com/jqqKRFm.png",alt:""}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("หลังจากสร้าง Firebase Project ก็สามารถดูค่า Configuration เพื่อใช้สำหรับการตั้งค่าในขั้นตอนต่อไป ได้จากการคลิ๊กตามลำดับที่ "),t("code",[this._v("1.")]),this._v("และ"),t("code",[this._v("2.")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("figure",{staticClass:"image"},[t("img",{attrs:{src:"https://i.imgur.com/ekNBqAA.png",alt:""}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("em",[this._v("Path")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[this._v("\n+-src\n|   |-firebase.js\n|   |-Insert.jsx\n|   |-Display.jsx\n|   |-Delete.jsx\n|   |-Update.jsx\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("พิมพ์คำสั่งที่ "),t("em",[this._v("Terminal")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[this._v("\n"),t("span",{staticClass:"hljs-comment"},[this._v("# ติดตั้ง package firebase")]),this._v("\nnpm install @firebase/app --save\nnpm install @firebase/firestore --save\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ไฟล์ "),t("em",[this._v("src/firebase.js")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// เรียกใช้ module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" firebase "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@firebase/app'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@firebase/firestore'")]),s._v("\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// ค่า minimum configuration คือ `apiKey` และ `projectId`")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" config = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("apiKey")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'AIzaSyCSZnKyvz6a8aBIAzLSG...'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("projectId")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'tutor4dev-...'")]),s._v("\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" firebase.apps["),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("] || firebase.initializeApp(config)\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("Component ที่ต้องการใช้งาน Instance ของ Firebase Application เราก็จะทำการ Import Module และจะใช้ตัว Instance ดังกล่าวในการสร้างตัวแปรเพื่อเข้าถึง Collection ชื่อ "),t("code",[this._v("users")]),this._v(" ตามลำดับ")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("em",[this._v("Code")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// เรียกใช้ module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" firebaseApp "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'../firebase'")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// ประกาศตัวแปรเพื่ออ้างอิง user collection")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" db = firebaseApp.firestore()\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" userCollection = db.collection("),a("span",{staticClass:"hljs-string"},[s._v("'users'")]),s._v(")\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ไฟล์ "),t("em",[this._v("src/Insert.jsx")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" React, { useState } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'react'")]),s._v("\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* โค้ดการเรียกใช้ firebaseApp */")]),s._v("\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Insert")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// ประกาศตัวแปร state และ method สำหรับเปลี่ยนค่าตัวแปร")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" [firstName, setFirstName] = useState("),a("span",{staticClass:"hljs-string"},[s._v("''")]),s._v(")\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" [lastName, setLastName] = useState("),a("span",{staticClass:"hljs-string"},[s._v("''")]),s._v(")\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("insertDocument")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// เว้นส่วนนี้ไว้ในขั้นตอนถัดไป")]),s._v("\n    }\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(' <div>\n        {/* ตัวแปร state จะถูกเปลี่ยนค่าเมื่อพิมพ์ข้อมูล และ trigger การ re-render */}\n        <input type="text" value={ firstName } onChange={e => setFirstName(e.target.value)} />\n        <input type="text" value={ lastName } onChange={e => setLastName(e.target.value)} />\n\n        {/* เรียกใช้ method เมื่อ click ปุ่ม */}\n        <button onClick={ insertDocument }>Save</button>\n    </div>\n}\n')])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"https://i.imgur.com/1aTBxiC.png",alt:""}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ขั้นตอนต่อไปจะเป็นการเขียนโค้ดสำหรับ Insert ข้อมูลไปยัง Cloud Firestore ครับ โดยเราได้ใช้ State "),t("code",[this._v("firstName")]),this._v(" และ "),t("code",[this._v("lastName")]),this._v(" เป็นข้อมูลที่นำไป Insert")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ไฟล์ "),t("em",[this._v("src/Insert.jsx")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("insertDocument")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// insert และคืน document reference")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" documentRef = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" userCollection.add({\n        firstName,\n        lastName\n    })\n\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// ใช้ document reference เข้าถึงค่า document id")]),s._v("\n    alert("),a("span",{staticClass:"hljs-string"},[s._v("`new document has been inserted as "),a("span",{staticClass:"hljs-subst"},[s._v("${ documentRef.id }")]),s._v("`")]),s._v(")\n}\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("figure",{staticClass:"image"},[t("img",{attrs:{src:"https://i.imgur.com/8x9kevK.png",alt:""}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("ข้อมูลถูกจัดเก็บใน Cloud Firestore แบบ Collection และ Document")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("Cloud Firestore รองรับการผูก Subscription แบบ Realtime เช่นเดียวกับ Firebase Realtime Database ในขั้นตอนนี้เราต้องใช้งาน "),t("code",[this._v("useEffect")]),this._v(" Hooks เพื่อจัดการกับ Lifecycle Method ของ React.js")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ไฟล์ "),t("em",[this._v("src/Display.jsx")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// เรียกใช้ module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" React, { useState, useEffect } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'react'")]),s._v("\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* โค้ดการเรียกใช้ firebaseApp */")]),s._v("\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Display")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// ประกาศตัวแปร state")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" [ users, setUsers ] = useState({})\n\n    useEffect("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// subscription นี้จะเกิด callback กับทุกการเปลี่ยนแปลงของ collection users")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" unsubscribe = userCollection.onSnapshot("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("ss")]),s._v(" =>")]),s._v(" {\n            "),a("span",{staticClass:"hljs-comment"},[s._v("// ตัวแปร local")]),s._v("\n            "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" users = {}\n\n            ss.forEach("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("document")]),s._v(" =>")]),s._v(" {\n                "),a("span",{staticClass:"hljs-comment"},[s._v("// manipulate ตัวแปร local")]),s._v("\n                users["),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".id] = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".data()\n            })\n\n            "),a("span",{staticClass:"hljs-comment"},[s._v("// เปลี่ยนค่าตัวแปร state")]),s._v("\n            setUsers(users)\n        })\n\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n            "),a("span",{staticClass:"hljs-comment"},[s._v("// ยกเลิก subsciption เมื่อ component ถูกถอดจาก dom")]),s._v("\n            unsubscribe()\n        }\n    }, [])\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")]),s._v("\n        {/* แสดงผล state users */}\n        "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("pre")]),s._v(">")]),s._v("{ JSON.stringify(users) }"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("pre")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")])]),s._v("\n}\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("em",[t("code",[this._v("users")])]),this._v(" State")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-json extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n{\n    "),a("span",{staticClass:"hljs-attr"},[s._v('"QJRxdiPlN4B9tuVUJd4T"')]),s._v(": {\n        "),a("span",{staticClass:"hljs-attr"},[s._v('"firstName"')]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v('"Steve"')]),s._v(",\n        "),a("span",{staticClass:"hljs-attr"},[s._v('"lastName"')]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v('"Jobs"')]),s._v("\n    },\n    "),a("span",{staticClass:"hljs-attr"},[s._v('"saysTLfSQBFxCFh7NR7s"')]),s._v(": {\n        "),a("span",{staticClass:"hljs-attr"},[s._v('"firstName"')]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v('"Dan"')]),s._v(",\n        "),a("span",{staticClass:"hljs-attr"},[s._v('"lastName"')]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v('"Abramov"')]),s._v("\n    }\n}\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"delete-component"}},[t("code",[this._v("Delete")]),this._v(" Component")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("การจัดการกับ Document ของ Cloud Firestore นั้นเราจะต้องใช้เลข ID ของ Document ในการอ้างอิง ขั้นตอนนี้จึงจะเป็นการนำ "),t("code",[this._v("users")]),this._v(" State มาแสดงคู่กับปุ่ม Delete โดยปุ่ม Delete จะส่งค่า Argument ซึ่งเป็นค่า ID ของ Document นั้นๆ")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ไฟล์ "),t("em",[this._v("src/Delete.jsx")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Delete")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-comment"},[s._v("/* โค้ด realtime subscription */")]),s._v("\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("deleteDocument")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("id")]),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// ประกาศตัวแปรเพื่ออ้างอิงไปยัง document ที่จะทำการลบ")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" documentRef = userCollection.doc(id)\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// ลบ document")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" documentRef.delete()\n\n        alert("),a("span",{staticClass:"hljs-string"},[s._v("`document "),a("span",{staticClass:"hljs-subst"},[s._v("${ id }")]),s._v(" has been deleted`")]),s._v(")\n    }\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")]),s._v("\n        { Object.keys(users).map(id => {\n            return "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("key")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("{")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("id")]),s._v(" } "),a("span",{staticClass:"hljs-attr"},[s._v("onClick")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("{")]),s._v(" () =>")]),s._v(" deleteDocument(id) }>Delete { id }"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(">")]),s._v("\n        }) }\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")])]),s._v("\n}\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"https://i.imgur.com/zB8oxZP.png",alt:""}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"update-component"}},[t("code",[this._v("Update")]),this._v(" Component")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("Update")]),this._v(" Component จะทำงานเป็น 2 ขั้นตอน ขั้นตอนแรกจะใช้ค่า Document ID อ่านค่า Document รายการที่ต้องการแก้ไขมาเก็บไว้กับตัวแปร State ซึ่งผูกกับ "),t("code",[this._v("onChange")]),this._v(" Event ของ "),t("code",[this._v("<input />")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("ไฟล์ "),t("em",[this._v("src/Update.jsx")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-js extra-class"},[a("pre",{staticClass:"hljs"},[a("code",[s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Update")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("readDocument")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("id")]),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// ประกาศตัวแปรเพื่ออ้างอิงไปยัง document ที่จะทำการลบ")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" documentRef = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" userCollection.doc(id).get()\n\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// อ่านค่าของ document")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" { firstName, lastName } = documentRef.data()\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// เปลี่ยนแปลง state ตามค่าของ document")]),s._v("\n        setId(documentRef.id)\n        setFirstName(firstName)\n        setLastName(lastName)\n    }\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("updateDocument")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// update ค่าไปยัง cloud firestore โดยใช้ค่าจาก state")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" options = { "),a("span",{staticClass:"hljs-attr"},[s._v("merge")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(" }\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" userCollection.doc(id).set({ firstName, lastName }, options)\n    }\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")]),s._v("\n        "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("p")]),s._v(">")]),s._v("ID: { id }"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("p")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")])]),s._v("\n}\n")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"https://i.imgur.com/oWwTrUt.png",alt:""}})])}],!1,null,null,null);t.default=n.exports}}]);