(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{167:function(s,a,t){"use strict";t.r(a);var l=t(0),v=Object(l.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",[s._v("Form Builder ไม่ใช่สิ่งจำเป็นสำหรับ Laravel Framework")]),s._v(" "),t("p",[s._v("Form Builder ได้ถูกถอดออกจาก Core ของ Laravel Framework ตั้งแต่เวอร์ชั่น 5 เป็นต้นมา หากนักพัฒนาต้องการใช้การ Form Builder จะต้องติดตั้ง Package "),t("code",[s._v("laravelcollective/html")]),s._v(" เพิ่มเติมเอง บทความนี้จึงขอเสนอทางเลือกในการโค้ด Laravel Framework แบบไม่ใช้งาน Form Builder โดยการเปลี่ยนมาใช้ "),t("code",[s._v("<form>")]),s._v(" แทนครับ")]),s._v(" "),t("h3",{attrs:{id:"ตัวอย่างโค้ดของ-laravel-form-builder"}},[s._v("ตัวอย่างโค้ดของ Laravel Form Builder")]),s._v(" "),t("p",[s._v("ก่อนอื่นเรามาดูตัวอย่างโค้ดของการใช้งาน Form Builder กันก่อนครับ")]),s._v(" "),t("p",[t("em",[s._v("Blade")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n{!! Form::open([ "),t("span",{staticClass:"hljs-string"},[s._v("'url'")]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v("'/registers'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'method'")]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v("'post'")]),s._v(" ]) !!}\n\n    {!! Form::input("),t("span",{staticClass:"hljs-string"},[s._v("'text'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'first_name'")]),s._v(", "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(", [ "),t("span",{staticClass:"hljs-string"},[s._v("'class'")]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v("'input'")]),s._v(" ]) !!}\n    {!! Form::input("),t("span",{staticClass:"hljs-string"},[s._v("'text'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'last_name'")]),s._v(", "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(", [ "),t("span",{staticClass:"hljs-string"},[s._v("'class'")]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v("'input'")]),s._v(" ]) !!}\n\n    {!! Form::submit("),t("span",{staticClass:"hljs-string"},[s._v("'Save'")]),s._v(", [ "),t("span",{staticClass:"hljs-string"},[s._v("'class'")]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v("'button is-primary'")]),s._v(" ]) !!}\n    {!! Form::reset("),t("span",{staticClass:"hljs-string"},[s._v("'Cancel'")]),s._v(", [ "),t("span",{staticClass:"hljs-string"},[s._v("'class'")]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v("'button is-danger'")]),s._v(" ]) !!}\n\n{!! Form::close() !!}\n")])])]),t("h3",{attrs:{id:"ข้อดีของ-laravel-form-builder"}},[s._v("ข้อดีของ Laravel Form Builder")]),s._v(" "),t("ul",[t("li",[s._v("คำสั่ง เขียน Form มีกลิ่นอายในแบบ Laravel Syntax")]),s._v(" "),t("li",[s._v("คำสั่ง "),t("code",[s._v("Form::open()")]),s._v(" ใส่ "),t("code",[s._v("csrf")]),s._v(" Token ให้โดยอัตโนมัติ")]),s._v(" "),t("li",[s._v("คำสั่ง "),t("code",[s._v("Form::select()")]),s._v(" ไม่จำเป็นต้องเขียน Loop เอง")]),s._v(" "),t("li",[s._v("คำสั่ง Form Element ต่างๆ Restore ค่าเดิมให้อัตโนมัติกรณีที่ไม่ผ่านการ Validation")]),s._v(" "),t("li",[s._v("คำสั่ง "),t("code",[s._v("Form::model()")]),s._v(" ช่วยเพิ่มความสะดวกในการใช้ Form ร่วมกับ "),t("code",[s._v("Eloquent")])])]),s._v(" "),t("h3",{attrs:{id:"ข้อเสียของ-laravel-form-builder"}},[s._v("ข้อเสียของ Laravel Form Builder")]),s._v(" "),t("ul",[t("li",[s._v("ถูกถอดออกจาก Core ของ Laravel Framework ตั้งแต่ Version 5 ถ้าจะใช้ต้องติดตั้งเพิ่มเติม")]),s._v(" "),t("li",[s._v("Form Builder ถูก Maintain โดย 3rd Party ไม่ใช่ Community ของ Laravel")]),s._v(" "),t("li",[s._v("ต้องเรียนรู้ Syntax เพิ่มเติม")]),s._v(" "),t("li",[s._v("ไม่รองรับ Emmet")]),s._v(" "),t("li",[s._v("กรณี Web Application มี UI ของ HTML ที่ซับซ้อน ต้องใช้ Syntax ของ Form Builder ผสมกับ HTML Element ทำให้ดูไม่สวยงาม")]),s._v(" "),t("li",[s._v("ไม่สามารถขอความช่วยเหลือจากนักพัฒนาที่ไม่ได้ใช้ Form Builder")])]),s._v(" "),t("h3",{attrs:{id:"html-form"}},[s._v("HTML Form")]),s._v(" "),t("p",[s._v("ก่อนที่จะเขียน "),t("code",[s._v("<form>")]),s._v(" ร่วมกับ Laravel Framework เรามาลองเขียน "),t("code",[s._v("<form>")]),s._v(" แบบพื้นฐานกันดูก่อน")]),s._v(" "),t("h3",{attrs:{id:"เตรียมไฟล์สำหรับเขียนโปรแกรม"}},[s._v("เตรียมไฟล์สำหรับเขียนโปรแกรม")]),s._v(" "),t("p",[t("em",[s._v("Path")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n|-register.html\n|-submit.html\n|-submit.php...\n")])])]),t("p",[s._v("เพิ่ม Attribute "),t("code",[s._v("action")]),s._v(" เพื่อกำหนดว่า Form จะถูก Submit ไปที่ไฟล์ไหน ซึ่งสามารถกำหนดเป็นไฟล์ HTML ก็ยังได้")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("register.html")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"/submit.html"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"text"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"first_name"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"text"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"last_name"')]),s._v(">")]),s._v("\n\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"submit"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"Save"')]),s._v(">")]),s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("Start PHP Built-in Web Server ที่ Root Path ของโปรเจค")]),s._v(" "),t("p",[s._v("พิมพ์คำสั่งที่ "),t("em",[s._v("Terminal")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\nphp -S localhost:8000\n")])])]),t("p",[t("em",[s._v("Browser")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\nhttp://localhost:8000/register.html\n")])])]),t("p"),t("figure",{staticClass:"image"},[t("img",{attrs:{src:"/images/blogs/1711-010.png",alt:"html form"}})]),t("p"),s._v(" "),t("h3",{attrs:{id:"การ-submit-form"}},[s._v("การ Submit Form")]),s._v(" "),t("p"),t("figure",{staticClass:"image"},[t("img",{attrs:{src:"/images/blogs/1711-011.png",alt:"html form submit using get method"}})]),t("p"),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("register.html")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("h3")]),s._v(">")]),s._v("ได้รับข้อมูลเรียบร้อยแล้ว"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("h3")]),s._v(">")]),s._v("\n")])])]),t("p"),t("figure",{staticClass:"image"},[t("img",{attrs:{src:"/images/blogs/1711-012.png",alt:"html form submit response"}})]),t("p"),s._v(" "),t("blockquote",[t("p",[s._v("การ Submit Form ด้วย Default Method ("),t("code",[s._v("GET")]),s._v(") จะส่งผลให้เกิดเป็น Query String ตามรูปตัวอย่าง ในการทำงานจริงเราจะไม่เลือกใช้ "),t("code",[s._v("GET")]),s._v(" Method สำหรับการ Submit Form เนื่องจากไม่มีความปลอดภัย")])]),s._v(" "),t("h3",{attrs:{id:"การ-submit-form-ด้วย-post-method"}},[s._v("การ Submit Form ด้วย "),t("code",[s._v("POST")]),s._v(" Method")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("register.html")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"/submit.html"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"POST"')]),s._v(">")]),s._v("\n    ...\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("p"),t("figure",{staticClass:"image"},[t("img",{attrs:{src:"/images/blogs/1711-013.png",alt:"html form submit using post method"}})]),t("p"),s._v(" "),t("blockquote",[t("p",[s._v("การ Submit Form ด้วย "),t("code",[s._v("POST")]),s._v(" Method ข้อมูลจะถูก Encode (เปลี่ยนแปลงรูปร่างหน้าตาเพื่อความสะดวกในการ Transportation) และ ถูกแนบไปกับ Request เราสามารถตรวจสอบ Request และ Response โดยใช้ Chrome "),t("code",[s._v("DevTools")])])]),s._v(" "),t("h3",{attrs:{id:"html-form-php-script"}},[s._v("HTML Form & PHP Script")]),s._v(" "),t("p",[s._v("การ Submit Form ไปยังไฟล์ HTML นั้นสามารถทำได้ แต่ก็นำมาใช้ประโยชน์อะไรไม่ได้ เราจะลองเปลี่ยนเป็นการ Submit Form ไปยังไฟล์ PHP แทนครับ")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("register.html")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"/submit.php"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"POST"')]),s._v(">")]),s._v("\n    ...\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("ไฟล์ "),t("em",[s._v("submit.php")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-meta"},[s._v("<?php")]),s._v("\n\nvar_dump($_POST);\n")])])]),t("p",[t("em",[s._v("Result")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("array")]),s._v(" (size="),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")\n  "),t("span",{staticClass:"hljs-string"},[s._v("'first_name'")]),s._v(" => string "),t("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(" (length="),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v(")\n  "),t("span",{staticClass:"hljs-string"},[s._v("'last_name'")]),s._v(" => string "),t("span",{staticClass:"hljs-string"},[s._v("'Doh'")]),s._v(" (length="),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")\n")])])]),t("h3",{attrs:{id:"เตรียมไฟล์สำหรับ-laravel-project"}},[s._v("เตรียมไฟล์สำหรับ Laravel Project")]),s._v(" "),t("p",[s._v("เรามาลอง Setup Laravel Project แบบง่ายๆ โดยมีไฟล์ที่จะนำมาใช้ตามบทความ ตามโครงสร้างด้านล่าง")]),s._v(" "),t("p",[t("em",[s._v("Path")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n+-app\n|   +-Http\n|   |   +-Controllers\n|   |   |   +-RegisterController\n+-resources\n|   +-views\n|   |   +-registers\n|   |   |   |-create.blade.php\n|   |   |   |-edit.blade.php\n|   +-routes\n|   |   |-web.php\n")])])]),t("h3",{attrs:{id:"route-controller-setup"}},[s._v("Route & Controller Setup")]),s._v(" "),t("p",[s._v("พิมพ์คำสั่งที่ "),t("em",[s._v("Terminal")])]),s._v(" "),t("p",[s._v("สร้าง Controller และ Route ในแบบ ReSTful")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\nphp artisan make:controller RegisterController --resource\n")])])]),t("p",[s._v("ไฟล์ "),t("em",[s._v("routes/web.php")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\nRoute::resource("),t("span",{staticClass:"hljs-string"},[s._v("'registers'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'RegisterController'")]),s._v(");\n")])])]),t("p",[s._v("ไฟล์ "),t("em",[s._v("app/Http/RegisterController.php")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("RegisterController")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Controller")]),s._v("\n")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("index")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("\n    ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("'Hello World'")]),s._v(";\n    }\n}\n")])])]),t("p",[s._v("พิมพ์คำสั่งที่ "),t("em",[s._v("Terminal")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\nphp artisan serv\n")])])]),t("p",[t("em",[s._v("Browser")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\nhttp://localhost:8000\n")])])]),t("h3",{attrs:{id:"ใช้งาน-form-ใน-laravel-framework"}},[s._v("ใช้งาน Form ใน Laravel Framework")]),s._v(" "),t("p",[s._v("จากโค้ดตัวอย่างในหัวข้อ HTML Form เราจะเห็นว่าสาระสำคัญในเรื่องการ Submit Form ก็คือ Attribute "),t("code",[s._v("action")]),s._v(" ของ "),t("code",[s._v("<form>")]),s._v(" ซึ่งเป็นตัวกำหนดว่า Form จะถูก Submit ไปที่ไฟล์ไหนเพื่อประมวลผล ดังนั้นเมื่อนำมาใช้กับ Laravel Framework เราก็เพียงแค่ระบุ URI ตามที่ต้องการ")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("resources/views/registers/create.blade.php")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"/registers"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"POST"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"text"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"first_name"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"text"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"last_name"')]),s._v(">")]),s._v("\n\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"submit"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"Save"')]),s._v(">")]),s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("ไฟล์ "),t("em",[s._v("App/Http/Controllers/RegisterController.php")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("RegisterController")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Controller")]),s._v("\n")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("create")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("\n    ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" view("),t("span",{staticClass:"hljs-string"},[s._v("'registers.create'")]),s._v(");\n    }\n\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("store")]),t("span",{staticClass:"hljs-params"},[s._v("(Request $request)")]),s._v("\n    ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v("'<h3>Thanks</h3>'")]),s._v(";\n    }\n}\n")])])]),t("p"),t("figure",{staticClass:"image"},[t("img",{attrs:{src:"/images/blogs/1711-010.png",alt:""}})]),t("p"),s._v(" "),t("p"),t("figure",{staticClass:"image"},[t("img",{attrs:{src:"/images/blogs/1711-014.png",alt:""}})]),t("p"),s._v(" "),t("blockquote",[t("p",[s._v("Oops !!! เกิดปัญหาหลังจากทดลอง Submit Form")])]),s._v(" "),t("h3",{attrs:{id:"csrf-protection"}},[s._v("CSRF Protection")]),s._v(" "),t("p",[s._v("Laravel Framework มีระบบป้องการการถูกโจมตีในแบบ "),t("code",[s._v("csrf")]),s._v(" เราจึงต้องส่งค่า "),t("code",[s._v("csrf")]),s._v(" Token แนบไปกับการ Submit Form เพื่อให้ Request สามารถผ่านด่านอรหันต์นี้เข้าไปได้ แต่โชคดีที่ Laravel Framework มี Helper Function ไว้ให้เราเรียกใช้ โดยเราจะแก้ไขโค้ดตามตัวอย่างด้านล่าง")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("creates/views/registers/create.blade.php")])]),s._v(" "),t("div",{pre:!0},[t("div",{pre:!0,attrs:{class:"language-html extra-class"}},[t("pre",{pre:!0,attrs:{class:"hljs"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/registers"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"POST"')]),s._v(">")]),s._v("\n    {{ csrf_field() }}\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n")])])])]),s._v(" "),t("p",[s._v("Refresh หน้าเว็บและลองแสดง Page Source")]),s._v(" "),t("p",[t("em",[s._v("Page Source")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"/registers"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"POST"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"hidden"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"_token"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"UeNq68NZdMAszrhDdS2QJ9zqX..."')]),s._v(">")]),s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("blockquote",[t("p",[t("code",[s._v("csrf_field()")]),s._v(" ได้สร้าง "),t("code",[s._v('<input type="henden">')])])]),s._v(" "),t("p",[s._v("แก้ไขโค้ดเพิ่มเติมตามตัวอย่างด้านล่าง เพื่อ Retrieve ค่าจาก Form")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("App/Http/Controllers/RegisterController.php")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("RegisterController")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Controller")]),s._v("\n")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("store")]),t("span",{staticClass:"hljs-params"},[s._v("(Request $request)")]),s._v("\n    ")]),s._v("{\n        $inputs = request()->all();\n        "),t("span",{staticClass:"hljs-comment"},[s._v("// $inputs = request()->except(_token);")]),s._v("\n\n        dd($inputs);\n    }\n}\n")])])]),t("p",[s._v("Refresh เว็บ, ป้อนข้อมูลใหม่ และลอง Submit Form")]),s._v(" "),t("p",[t("em",[s._v("Result")])]),s._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("array")]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(" [▼\n  "),t("span",{staticClass:"hljs-string"},[s._v('"_token"')]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v('"UeNq68NZdMAszrhDdS2QJ9zq..."')]),s._v("\n  "),t("span",{staticClass:"hljs-string"},[s._v('"first_name"')]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v('"John"')]),s._v("\n  "),t("span",{staticClass:"hljs-string"},[s._v('"last_name"')]),s._v(" => "),t("span",{staticClass:"hljs-string"},[s._v('"Doh"')]),s._v("\n]\n")])])]),t("h3",{attrs:{id:"action-helper-function"}},[t("code",[s._v("action()")]),s._v(" Helper Function")]),s._v(" "),t("p",[s._v("หากเราไม่คุ้นเคยกับการเรียกใช้ URL Path ตรงๆ เราสามารถใช้ Helper Function "),t("code",[s._v("action()")]),s._v(" เพื่อระบุการเข้าถึง Method ใน Controller ซึ่งง่ายกว่าในการทำความเข้าใจว่า Form จะถูก Submit ไปที่ใดกันแน่")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("resources/views/registers/create.blade.php")])]),s._v(" "),t("div",{pre:!0},[t("div",{pre:!0,attrs:{class:"language-html extra-class"}},[t("pre",{pre:!0,attrs:{class:"hljs"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"{{ action('RegisterController@store') }}\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"POST"')]),s._v(">")]),s._v("\n    ...\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n")])])])]),s._v(" "),t("h3",{attrs:{id:"restful-method"}},[s._v("ReSTful Method")]),s._v(" "),t("p",[s._v("การใช้ "),t("code",[s._v("<form>")]),s._v(" เพื่อสร้าง ReSTful Request บางคนมักจะเข้าใจผิดว่าเราสามารถทำได้โดยการแก้ไขค่า Attribute "),t("code",[s._v("method")]),s._v(" เหมือนในตัวอย่างด้านล่าง")]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"..."')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"PUT"')]),s._v(">")]),s._v("\n    ...\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("แต่ในความเป็นจริง "),t("code",[s._v("PUT")]),s._v(" และ "),t("code",[s._v("DELETE")]),s._v(" Method ไม่มีตัวตนอยู่จริงใน HTML Form แต่มีตัวตนใน "),t("code",[s._v("XMLHttpRequest")]),s._v(" (AJAX) ดังนั้นการจะประยุกต์ใช้งาน HTTP Method เช่น "),t("code",[s._v("PUT")]),s._v(" และ "),t("code",[s._v("DELETE")]),s._v(" จึงเป็นได้แค่ส่วนขยายของ "),t("code",[s._v("POST")]),s._v(" Method เท่านั้น ซึ่่งเป็นเรื่องของแต่ละ Framework ที่จะกำหนดวิธีการขึ้นมาเอง ซึ่งการกำหนด "),t("code",[s._v("PUT")]),s._v(" และ "),t("code",[s._v("DELETE")]),s._v(" Method ใน Laravel Framework จะใช้ Helper Function ชื่อ "),t("code",[s._v("method_field()")]),s._v(" เป็นตัวกำหนด ตามตัวอย่างโค้ดด้านล่าง")]),s._v(" "),t("h3",{attrs:{id:"put-method"}},[t("code",[s._v("PUT")]),s._v(" Method")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("creates/views/registers/edit.blade.php")])]),s._v(" "),t("div",{pre:!0},[t("div",{pre:!0,attrs:{class:"language-html extra-class"}},[t("pre",{pre:!0,attrs:{class:"hljs"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"{{ action('RegisterController@update', [ 'id' => 1001 ]) }}\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"POST"')]),s._v(">")]),s._v("\n    {{ csrf_field() }}\n\n    {{ method_field('PUT') }}\n\n    ...\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n")])])])]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("RegisterController@update")]),s._v(" นั้นจะต้องแนบ Argument ซึ่งเป็น ID ของ Record ที่จะถูกแก้ไขไปด้วย เราจึงจำเป็นจะต้องมี Argument เพิ่มเติมให้กับ "),t("code",[s._v("action()")]),s._v(" ด้วย")])]),s._v(" "),t("p",[t("em",[s._v("Page Source")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"http://localhost:8000/registers/1001"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"POST"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"hidden"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"_token"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"UeNq68NZdMAszrhDdS2QJ9zqXQ1G02nav4e3sW6P"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"hidden"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"_method"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"PUT"')]),s._v(">")]),s._v("\n\n    ...\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("blockquote",[t("p",[t("code",[s._v("method_feld()")]),s._v(" ได้สร้าง "),t("code",[s._v('<input type="henden">')])])]),s._v(" "),t("h3",{attrs:{id:"delete-method"}},[t("code",[s._v("DELETE")]),s._v(" Method")]),s._v(" "),t("p",[s._v("ไฟล์ "),t("em",[s._v("creates/views/registers/edit.blade.php")])]),s._v(" "),t("div",{pre:!0},[t("div",{pre:!0,attrs:{class:"language-html extra-class"}},[t("pre",{pre:!0,attrs:{class:"hljs"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"{{ action('RegisterController@destroy', [ 'id' => 1001 ]) }}\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"POST"')]),s._v(">")]),s._v("\n    {{ csrf_field() }}\n\n    {{ method_field('DELETE') }}\n\n    ...\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n")])])])]),s._v(" "),t("p",[t("em",[s._v("Page Source")])]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{staticClass:"hljs"},[t("code",[s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("action")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"http://localhost:8000/registers/1001"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("method")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"POST"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"hidden"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"_token"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"UeNq68NZdMAszrhDdS2QJ9zqXQ1G02nav4e3sW6P"')]),s._v(">")]),s._v("\n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("input")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("type")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"hidden"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"_method"')]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("value")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"DELETE"')]),s._v(">")]),s._v("\n\n    ...\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("form")]),s._v(">")]),s._v("\n")])])]),t("h3",{attrs:{id:"つづく"}},[s._v("つづく")])])}],!1,null,null,null);a.default=v.exports}}]);