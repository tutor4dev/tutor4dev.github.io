(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{169:function(s,a,e){"use strict";e.r(a);var t=e(1),l=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"content"},[e("h1",[s._v("ใช้งาน DB Seeder และ Model Factory")]),s._v(" "),e("p",[s._v("ในการพัฒนา Database Web App การมีข้อมูลทดสอบหรือ Dummy Data มีความจำเป็นพอสมควร หากมีข้อมูลทดสอบไม่มากพอ ก็อาจทำให้การทดสอบต่างๆ ในการเขียน Web App บกพร่องตามไปด้วย Laravel ได้มีตัวช่วยที่ชื่อ DB Seeder ให้ใช้งานมาตั้งแต่ใน Laravel Version เก่า แต่ใน Version 5.1.x Laravel ได้เพิ่ม Model Factory ซึ่งยิ่งทำให้การ Seed ข้อมูลทดสอบเข้าสู่นฐานข้อมูลนั้นง่ายยิ่งขึ้นไปอีก")]),s._v(" "),e("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/vKFaKRbrhIU",frameborder:"0",allowfullscreen:""}}),s._v(" "),e("h3",{attrs:{id:"ใช้งาน-db-seeder"}},[s._v("ใช้งาน DB Seeder")]),s._v(" "),e("p",[e("em",[s._v("database/seeds/DatabaseSeeder.php")])]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\n"),e("span",{staticClass:"hljs-class"},[e("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("DatabaseSeeder")]),s._v(" "),e("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("Seeder")]),s._v("\n")]),s._v("{\n    "),e("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("run")]),e("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("\n    ")]),s._v("{\n        Model::unguard();\n\n        "),e("span",{staticClass:"hljs-comment"},[s._v("// $this->call(UserTableSeeder::class);")]),s._v("\n        "),e("span",{staticClass:"hljs-keyword"},[s._v("$this")]),s._v("->command->info("),e("span",{staticClass:"hljs-string"},[s._v("'Hello World'")]),s._v(");\n\n        Model::reguard();\n    }\n}\n")])])]),e("p",[s._v("พิมพ์คำสั่งที่ "),e("em",[s._v("Terminal")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\nphp artisan db:seed\n")])])]),e("h3",{attrs:{id:"สร้างไฟล์-seeder-สำหรับ-table-customer"}},[s._v("สร้างไฟล์ Seeder สำหรับ Table Customer")]),s._v(" "),e("p",[s._v("พิมพ์คำสั่งที่ "),e("em",[s._v("Terminal")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\nphp artisan make:seeder CustomerTableSeeder\n\ncomposer dump-autoload\n")])])]),e("p",[e("em",[s._v("database/seeds/CustomerTableSeeder.php")])]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\n"),e("span",{staticClass:"hljs-class"},[e("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("CustomerTableSeeder")]),s._v(" "),e("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("Seeder")]),s._v("\n")]),s._v("{\n    "),e("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("run")]),e("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("\n    ")]),s._v("{\n        $faker = Faker\\Factory::create();\n\n        $customer = [\n            "),e("span",{staticClass:"hljs-string"},[s._v("'name'")]),s._v(" => $faker->name,\n            "),e("span",{staticClass:"hljs-string"},[s._v("'email'")]),s._v(" => $faker->email\n        ];\n\n        \\DB::table("),e("span",{staticClass:"hljs-string"},[s._v("'customers'")]),s._v(")->insert($customer);\n    }\n}\n")])])]),e("h3",{attrs:{id:"ใช้งาน-db-seeder-กับ-customertableseeder"}},[s._v("ใช้งาน DB Seeder กับ CustomerTableSeeder")]),s._v(" "),e("p",[e("em",[s._v("database/seeds/DatabaseSeeder.php")])]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\n"),e("span",{staticClass:"hljs-class"},[e("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("DatabaseSeeder")]),s._v(" "),e("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("Seeder")]),s._v("\n")]),s._v("{\n    "),e("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("run")]),e("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("\n    ")]),s._v("{\n        Model::unguard();\n\n        "),e("span",{staticClass:"hljs-keyword"},[s._v("$this")]),s._v("->call(CustomerTableSeeder::class);\n\n        Model::reguard();\n    }\n}\n")])])]),e("p",[s._v("พิมพ์คำสั่งที่ "),e("em",[s._v("Terminal")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\nphp artisan db:seed\n")])])]),e("h3",{attrs:{id:"ใช้งาน-model-factory"}},[s._v("ใช้งาน Model Factory")]),s._v(" "),e("p",[e("em",[s._v("database/factories/ModelFactory.php")])]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\n$factory->define(App\\Customer::class, "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),e("span",{staticClass:"hljs-params"},[s._v("(Faker\\Generator $faker)")]),s._v(" ")]),s._v("{\n    "),e("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" [\n        "),e("span",{staticClass:"hljs-string"},[s._v("'name'")]),s._v(" => $faker->name,\n        "),e("span",{staticClass:"hljs-string"},[s._v("'email'")]),s._v(" => $faker->email,\n    ];\n});\n")])])]),e("p",[e("em",[s._v("database/seeds/CustomerTableSeeder.php")])]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\n"),e("span",{staticClass:"hljs-class"},[e("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("CustomerTableSeeder")]),s._v(" "),e("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("Seeder")]),s._v("\n")]),s._v("{\n    "),e("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),e("span",{staticClass:"hljs-function"},[e("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),e("span",{staticClass:"hljs-title"},[s._v("run")]),e("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("\n    ")]),s._v("{\n        factory("),e("span",{staticClass:"hljs-string"},[s._v("'App\\Customer'")]),s._v(", "),e("span",{staticClass:"hljs-number"},[s._v("10")]),s._v(")->create();\n    }\n}\n")])])]),e("p",[s._v("พิมพ์คำสั่งที่ "),e("em",[s._v("Terminal")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{staticClass:"hljs"},[e("code",[s._v("\nphp artisan db:seed\n")])])]),e("blockquote",[e("p",[s._v("Code ตัวอย่างในบทความนี้ถูกทดสอบบน Laravel 5.2.x")])])])}],!1,null,null,null);a.default=l.exports}}]);